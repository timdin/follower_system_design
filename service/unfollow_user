FUNCTION unfollowUser(follower_id, followed_id):
    -- Delete follow relationship from the database
    SQL QUERY "DELETE FROM follows WHERE follower_id = ? AND followed_id = ?"
    EXECUTE QUERY with follower_id, followed_id

    -- Invalidate the cache for the follower's following list
    Redis.DELETE "following:follower_id:*"
    
    -- Invalidate the cache for the followed user's followers list
    Redis.DELETE "followers:followed_id:*"

    RETURN success
